<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fireworks Birthday</title>
<style>
html,body{margin:0;padding:0;width:100%;height:100%;background:black;overflow:hidden;font-family:'Times New Roman', serif;}
canvas{position:absolute;top:0;left:0;}
.shake{animation:shake .3s;}
@keyframes shake{0%{transform:translate(0)}25%{transform:translate(6px,-6px)}50%{transform:translate(-6px,6px)}75%{transform:translate(6px,6px)}100%{transform:translate(0)}}
#fog{position:absolute;inset:0;background:radial-gradient(circle at 30% 70%, rgba(255,255,255,0.05), transparent 60%),radial-gradient(circle at 70% 30%, rgba(255,255,255,0.04), transparent 60%);animation:fog 40s linear infinite;pointer-events:none;}
@keyframes fog{from{transform:translateX(0);}to{transform:translateX(-400px);}}
#textBox{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;color:white;opacity:0;pointer-events:none;}
#textBox.show{animation:fadeIn 2s forwards;}
#textBox .line{opacity:0;font-size:48px;font-weight:bold;margin:10px;}
@keyframes fadeIn{from{opacity:0; transform:scale(0.9)} to{opacity:1; transform:scale(1)}}
</style>
</head>
<body>

<canvas id="stars"></canvas>
<canvas id="fire"></canvas>
<div id="fog"></div>

<div id="textBox">
  <div id="line1" class="line">And quietly it became now</div>
  <div id="line2" class="line">Happy Birthday Sonam Didi</div>
</div>

<script>
const starsC=document.getElementById("stars");
const fireC=document.getElementById("fire");
const sctx=starsC.getContext("2d");
const ctx=fireC.getContext("2d");

function resize(){ starsC.width=fireC.width=innerWidth; starsC.height=fireC.height=innerHeight; }
resize(); window.onresize=resize;

/* Stars */
let stars=[];
for(let i=0;i<200;i++) stars.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:Math.random()*1.5});
function drawStars(){ sctx.clearRect(0,0,innerWidth,innerHeight); sctx.fillStyle="white"; stars.forEach(s=>{sctx.beginPath();sctx.arc(s.x,s.y,s.r,0,Math.PI*2);sctx.fill();}); }

/* Audio */
const AudioCtx=window.AudioContext||window.webkitAudioContext;
const audio=new AudioCtx();
document.body.addEventListener("click",()=>audio.resume(),{once:true});
function boom(){const n=audio.createBufferSource();const b=audio.createBuffer(1,audio.sampleRate*0.3,audio.sampleRate);const d=b.getChannelData(0);for(let i=0;i<d.length;i++)d[i]=(Math.random()*2-1)*(1-i/d.length);n.buffer=b;const g=audio.createGain();g.gain.value=1;n.connect(g);g.connect(audio.destination);n.start();document.body.classList.add("shake");setTimeout(()=>document.body.classList.remove("shake"),300);}

/* Rockets + Particles */
let rockets=[],parts=[],explosions=0;
class Rocket{
  constructor(){this.x=Math.random()*innerWidth;this.y=innerHeight;this.vy=-(Math.random()*9+10);this.stopY=Math.random()*innerHeight*0.5+100;}
  update(){this.y+=this.vy;this.vy+=0.05;ctx.fillStyle="rgba(255,255,255,0.25)";ctx.beginPath();ctx.arc(this.x,this.y,4,0,Math.PI*2);ctx.fill();if(this.y<=this.stopY){explode(this.x,this.y);return false;}return true;}
}
class Particle{
  constructor(x,y){const a=Math.random()*Math.PI*2,s=Math.random()*9+4;this.x=x;this.y=y;this.vx=Math.cos(a)*s;this.vy=Math.sin(a)*s;this.life=140;this.col=`hsl(${Math.random()*360},100%,60%)`;}
  update(){this.vy+=0.05;this.x+=this.vx;this.y+=this.vy;this.life--;ctx.fillStyle=this.col;ctx.beginPath();ctx.arc(this.x,this.y,4,0,Math.PI*2);ctx.fill();return this.life>0;}
}

function explode(x,y){for(let i=0;i<250;i++) parts.push(new Particle(x,y));boom(); explosions++; if(explosions===5){ showText(); } }

function showText(){
  const box=document.getElementById("textBox");
  box.classList.add("show");
  setTimeout(()=>document.getElementById("line1").style.opacity=1,500);
  setTimeout(()=>document.getElementById("line2").style.opacity=1,2500);
  setTimeout(()=>window.location.href="party.html",7500); // redirect 5 sec after fade-in
}

setInterval(()=>rockets.push(new Rocket()),1500);

function animate(){ drawStars(); ctx.fillStyle="rgba(0,0,0,0.25)"; ctx.fillRect(0,0,innerWidth,innerHeight); rockets=rockets.filter(r=>r.update()); parts=parts.filter(p=>p.update()); requestAnimationFrame(animate);}
animate();
</script>

</body>
</html>  
