<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fireworks Night</title>

<style>
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:black;
  overflow:hidden;
  font-family: 'Poppins', sans-serif;
}

canvas{
  position:absolute;
  top:0;
  left:0;
}

/* TEXT */
#textBox{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  color:white;
  text-align:center;
  opacity:0;
  pointer-events:none;
}
#textBox.show{
  animation:fadeIn 2s forwards;
}

#mainText{
  font-size:48px;
  font-weight:700;
  margin-bottom:10px;
}
#subText{
  font-size:26px;
  opacity:0.8;
}

@keyframes fadeIn{
  from{opacity:0; transform:scale(0.9)}
  to{opacity:1; transform:scale(1)}
}

/* SHAKE */
.shake{animation:shake .3s}
@keyframes shake{
  0%{transform:translate(0)}
  25%{transform:translate(6px,-6px)}
  50%{transform:translate(-6px,6px)}
  75%{transform:translate(6px,6px)}
  100%{transform:translate(0)}
}

/* FOG */
#fog{
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 30% 70%, rgba(255,255,255,.05), transparent 60%),
    radial-gradient(circle at 70% 30%, rgba(255,255,255,.04), transparent 60%);
  animation:fog 40s linear infinite;
  pointer-events:none;
}
@keyframes fog{
  from{transform:translateX(0)}
  to{transform:translateX(-400px)}
}
</style>
</head>

<body>

<canvas id="stars"></canvas>
<canvas id="fire"></canvas>
<div id="fog"></div>

<!-- TEXT -->
<div id="textBox">
  <div id="mainText">ðŸŽ‰ Happy Birthday ðŸŽ‰</div>
  <div id="subText">Sonam Didi ðŸ’–</div>
</div>

<script>
const starsC=document.getElementById("stars"),
fireC=document.getElementById("fire"),
sctx=starsC.getContext("2d"),
ctx=fireC.getContext("2d");

function resize(){
  starsC.width=fireC.width=innerWidth;
  starsC.height=fireC.height=innerHeight;
}
resize(); window.onresize=resize;

/* STARS */
let stars=[];
for(let i=0;i<200;i++){
  stars.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:Math.random()*1.5});
}
function drawStars(){
  sctx.clearRect(0,0,innerWidth,innerHeight);
  sctx.fillStyle="white";
  stars.forEach(s=>{
    sctx.beginPath();
    sctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    sctx.fill();
  });
}

/* SOUND */
const AudioCtx=window.AudioContext||window.webkitAudioContext;
const audio=new AudioCtx();
document.body.addEventListener("click",()=>audio.resume(),{once:true});

function boom(){
  const n=audio.createBufferSource();
  const b=audio.createBuffer(1,audio.sampleRate*0.3,audio.sampleRate);
  const d=b.getChannelData(0);
  for(let i=0;i<d.length;i++) d[i]=(Math.random()*2-1)*(1-i/d.length);
  n.buffer=b;
  const g=audio.createGain();
  g.gain.value=1;
  n.connect(g); g.connect(audio.destination);
  n.start();

  document.body.classList.add("shake");
  setTimeout(()=>document.body.classList.remove("shake"),300);
}

/* FIREWORKS */
let rockets=[],parts=[],explosions=0;

class Rocket{
  constructor(){
    this.x=Math.random()*innerWidth;
    this.y=innerHeight;
    this.vy=-(Math.random()*6+8);
    this.stopY=Math.random()*innerHeight*0.5+100;
  }
  update(){
    this.y+=this.vy; this.vy+=0.05;
    ctx.fillStyle="rgba(255,255,255,.4)";
    ctx.beginPath(); ctx.arc(this.x,this.y,2,0,Math.PI*2); ctx.fill();
    if(this.y<=this.stopY){
      explode(this.x,this.y);
      return false;
    }
    return true;
  }
}

class Particle{
  constructor(x,y){
    const a=Math.random()*Math.PI*2,s=Math.random()*8+3;
    this.x=x; this.y=y;
    this.vx=Math.cos(a)*s;
    this.vy=Math.sin(a)*s;
    this.life=120;
    this.col=`hsl(${Math.random()*360},100%,60%)`;
  }
  update(){
    this.vy+=0.05;
    this.x+=this.vx; this.y+=this.vy;
    this.life--;
    ctx.fillStyle=this.col;
    ctx.beginPath(); ctx.arc(this.x,this.y,3,0,Math.PI*2); ctx.fill();
    return this.life>0;
  }
}

function explode(x,y){
  for(let i=0;i<220;i++) parts.push(new Particle(x,y));
  boom();
  explosions++;
  if(explosions===5){
    document.getElementById("textBox").classList.add("show");
  }
}

setInterval(()=>rockets.push(new Rocket()),1800);

function animate(){
  drawStars();
  ctx.fillStyle="rgba(0,0,0,.25)";
  ctx.fillRect(0,0,innerWidth,innerHeight);
  rockets=rockets.filter(r=>r.update());
  parts=parts.filter(p=>p.update());
  requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
