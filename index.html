<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sonam Didi</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="stars"></div>
<canvas id="fireworksCanvas"></canvas>

<div id="text" class="hidden">
  <div class="line l1">AND QUIETLY IT BECAME NOW</div>
  <div class="line l2">Happy Birthday 2000 – 2026</div>
  <div class="line l3">Sonam Didi ✨</div>
</div>

<script>
const canvas = document.getElementById('fireworksCanvas');
const ctx = canvas.getContext('2d');
let cw, ch;

function resizeCanvas() {
  cw = window.innerWidth;
  ch = window.innerHeight;
  canvas.width = cw;
  canvas.height = ch;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

class Firework {
  constructor() {
    this.x = cw / 2;
    this.y = ch;
    this.targetY = ch * (0.3 + Math.random() * 0.2); // burst height
    this.speed = 8 + Math.random() * 3;
    this.sparks = [];
    this.exploded = false;
  }
  update() {
    if (!this.exploded) {
      this.y -= this.speed;
      if (this.y <= this.targetY) {
        this.explode();
      }
    } else {
      this.sparks.forEach(s => s.update());
      this.sparks = this.sparks.filter(s => !s.done);
    }
  }
  explode() {
    this.exploded = true;
    const sparkCount = 80 + Math.floor(Math.random() * 80);
    for (let i = 0; i < sparkCount; i++) {
      const angle = Math.random() * 2 * Math.PI;
      const speed = 2 + Math.random() * 5;
      const gravity = 0.06 + Math.random() * 0.03;
      const color = `hsl(${Math.random()*360},100%,50%)`;
      this.sparks.push(new Spark(this.x, this.y, speed, angle, gravity, color));
    }
  }
  draw(ctx) {
    if (!this.exploded) {
      ctx.beginPath();
      ctx.arc(this.x, this.y, 4, 0, Math.PI*2);
      ctx.fillStyle = "white";
      ctx.fill();
    } else {
      this.sparks.forEach(s => s.draw(ctx));
    }
  }
  done() {
    return this.exploded && this.sparks.length === 0;
  }
}

class Spark {
  constructor(x, y, speed, angle, gravity, color) {
    this.x = x;
    this.y = y;
    this.vx = Math.cos(angle) * speed;
    this.vy = Math.sin(angle) * speed;
    this.gravity = gravity;
    this.color = color;
    this.opacity = 1;
    this.fade = 0.01 + Math.random()*0.02;
    this.done = false;
  }
  update() {
    this.vy += this.gravity;
    this.x += this.vx;
    this.y += this.vy;
    this.opacity -= this.fade;
    if (this.opacity <= 0) this.done = true;
  }
  draw(ctx) {
    ctx.beginPath();
    ctx.arc(this.x, this.y, 3, 0, Math.PI*2);
    ctx.fillStyle = this.color;
    ctx.globalAlpha = this.opacity;
    ctx.fill();
    ctx.globalAlpha = 1;
  }
}

// Animation loop
let fireworks = [];
let rocketCount = 0;
let textShown = false;

function animate() {
  ctx.fillStyle = "rgba(0,0,0,0.15)";
  ctx.fillRect(0,0,cw,ch);

  fireworks.forEach(f => f.update());
  fireworks.forEach(f => f.draw(ctx));
  fireworks = fireworks.filter(f => !f.done());

  requestAnimationFrame(animate);
}
animate();

// Launch fireworks every 2 seconds
function launchSequence() {
  rocketCount++;
  const f = new Firework();
  fireworks.push(f);
  if (rocketCount < 5) {
    setTimeout(launchSequence, 2000);
  } else {
    // Final rocket after 2 sec
    setTimeout(() => {
      const finalFirework = new Firework();
      fireworks.push(finalFirework);
      // Show text after final firework fully explodes (~3 sec)
      setTimeout(showText, 3000);
    }, 2000);
  }
}

function showText() {
  const text = document.getElementById('text');
  const lines = document.querySelectorAll('.line');
  text.classList.remove('hidden');
  let delay = 0;
  lines.forEach(line => {
    setTimeout(() => {
      line.classList.add('fade-line');
    }, delay);
    delay += 2000;
  });
}

launchSequence();
</script>

</body>
</html>
